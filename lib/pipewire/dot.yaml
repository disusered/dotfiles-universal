linux[whoami.distro^="Arch"]:
  installs:
    cmd: |
      yay -S --noconfirm \
        pipewire pipewire-audio gst-plugin-pipewire wireplumber \
        pipewire-alsa pipewire-jack playerctl pipewire-zeroconf \
        pipewire-v4l2 pavucontrol pipewire-pulse lib32-pipewire \
        helvum easyeffects
      systemctl --user enable --now pipewire.service
      systemctl --user enable --now pipewire-pulse.service
      systemctl --user enable --now wireplumber
    depends:
      - /lib/avahi
  # TODO: individually link easyeffect presets
  # presets: {{ dirs.base.config }}/easyeffects/output/
  links:
    raop.conf: {{ dirs.base.config }}/pipewire/pipewire.conf.d/50-raop.conf
    pipewire.toml: {{ dirs.base.config }}/pypr/conf.d/pipewire.toml
    pipewire.conf: {{ dirs.base.config }}/hypr/conf.d/pipewire.conf
